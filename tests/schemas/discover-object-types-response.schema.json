{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://schemas.mcp-xpp.com/discover-object-types-json.schema.json",
  "title": "Discover Object Types JSON Response Schema",
  "description": "JSON Schema for the discover_object_types_json MCP tool response",
  "type": "object",
  "required": ["aotStructure"],
  "additionalProperties": false,
  "properties": {
    "aotStructure": {
      "type": "object",
      "description": "Application Object Tree (AOT) structure containing D365 object categories",
      "patternProperties": {
        "^[A-Za-z0-9\\s&()-]+$": {
          "type": "object",
          "description": "AOT category definition with metadata and child objects",
          "required": ["folderPatterns", "icon", "description"],
          "additionalProperties": false,
          "properties": {
            "folderPatterns": {
              "type": "array",
              "description": "Array of folder pattern strings used to identify this category",
              "minItems": 1,
              "items": {
                "type": "string",
                "pattern": "^[A-Za-z0-9_()-]+$"
              }
            },
            "icon": {
              "type": "string",
              "description": "Icon filename for this category",
              "pattern": "^[A-Za-z0-9_.-]+\\.ico$"
            },
            "description": {
              "type": "string",
              "description": "Human-readable description of this category",
              "minLength": 10,
              "maxLength": 200
            },
            "children": {
              "type": "object",
              "description": "Object containing child object type definitions with detailed metadata",
              "patternProperties": {
                "^[A-Za-z0-9\\s()-]+$": {
                  "type": "object",
                  "description": "Child object type with detailed metadata",
                  "required": ["folderPatterns", "fileExtensions", "objectType", "creatable", "icon", "description"],
                  "properties": {
                    "folderPatterns": {
                      "type": "array",
                      "items": {
                        "type": "string",
                        "pattern": "^[A-Za-z0-9_()-]+$"
                      },
                      "minItems": 1
                    },
                    "fileExtensions": {
                      "type": "array",
                      "items": {
                        "type": "string",
                        "pattern": "^\\.[a-z0-9]+$"
                      },
                      "minItems": 1
                    },
                    "objectType": {
                      "type": "string",
                      "description": "Internal object type identifier",
                      "pattern": "^[a-zA-Z0-9()]+$"
                    },
                    "creatable": {
                      "type": "boolean",
                      "description": "Whether this object type can be created"
                    },
                    "icon": {
                      "type": "string",
                      "description": "Icon filename for this object type",
                      "pattern": "^[A-Za-z0-9_.-]+\\.ico$"
                    },
                    "description": {
                      "type": "string",
                      "description": "Human-readable description of this object type",
                      "minLength": 2
                    },
                    "apiSupported": {
                      "type": "boolean",
                      "description": "Whether this object type supports API operations"
                    },
                    "apiClass": {
                      "type": "string",
                      "description": "Full API class name for this object type",
                      "pattern": "^Microsoft\\.Dynamics\\.AX\\.Metadata\\.MetaModel\\.[A-Za-z0-9]+$"
                    },
                    "namespace": {
                      "type": "string",
                      "description": "Namespace for the API class",
                      "pattern": "^Microsoft\\.Dynamics\\.AX\\.Metadata\\.MetaModel$"
                    },
                    "baseType": {
                      "type": "string",
                      "description": "Base type for the object",
                      "pattern": "^[A-Za-z0-9]+$"
                    }
                  }
                }
              },
              "minProperties": 0
            },
            "fileExtensions": {
              "type": "array",
              "description": "File extensions for this category when it's a leaf object",
              "items": {
                "type": "string",
                "pattern": "^\\.[a-z0-9]+$"
              }
            },
            "objectType": {
              "type": "string",
              "description": "Object type identifier for leaf objects",
              "pattern": "^[a-zA-Z0-9()]+$"
            },
            "creatable": {
              "type": "boolean",
              "description": "Whether objects of this type can be created"
            },
            "apiSupported": {
              "type": "boolean",
              "description": "Whether this object type supports API operations"
            },
            "apiClass": {
              "type": "string",
              "description": "Full API class name for this object type"
            }
          }
        }
      },
      "minProperties": 10,
      "maxProperties": 20
    }
  }
}
